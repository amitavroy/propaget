var distributionApp=angular.module("distributionApp",["ngRoute","ui.bootstrap"]);distributionApp.filter("startFrom",function(){return function(a,b){return a?(b=+b,a.slice(b)):[]}}),distributionApp.config(["$routeProvider","$locationProvider",function(a){a.when("/list",{title:"List Distribution",templateUrl:base_url+"/distribution/list",controller:"distributionController"}).when("/view/:id",{title:"View Distribution",templateUrl:base_url+"distribution/view",controller:"distributionViewCtrl"}).otherwise({redirectTo:"/list"})}]),distributionApp.factory("distributionService",["$http","$rootScope",function(a){return{apiCall:function(b,c,d,e){return a({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:base_url+d,method:c,data:void 0!=e?$.param(e):""}).success(function(){})}}}]),distributionApp.controller("mainCtrl",["$scope","distributionService",function(a){a.$on("MsgEvent",function(b,c){a.infoMsg=c}),a.infoMsg=""}]),distributionApp.controller("distributionController",["$scope","distributionService","$location",function(a,b,c){var d="GET",e="dist-list";b.apiCall("getDistributions",d,e).then(function(b){a.distributionlist=b.data,a.currentPage=1,a.entryLimit=10,a.filteredItems=a.distributionlist.length,a.totalItems=a.distributionlist.length}),a.setPage=function(b){a.currentPage=b},a.filter=function(){$timeout(function(){a.filteredItems=a.filtered.length},10)},a.sort_by=function(b){a.predicate=b,a.reverse=!a.reverse},a.deleteDistribution=function(d){var e="DELETE",f="dist-list/"+d;b.apiCall("DeleteDistribution",e,f).then(function(b){a.$emit("MsgEvent",b.data),c.path("/")})}}]),distributionApp.controller("distributionViewCtrl",["$scope","distributionService","$routeParams",function(a,b,c){if(a.$emit("MsgEvent",""),c.id){var d=c.id,e="GET",f="dist-list/"+d;b.apiCall("getSingleDistribution",e,f).then(function(b){b.data&&(a.distributionMemberlist=b.data,a.currentPage=1,a.entryLimit=10,a.filteredItems=a.distributionMemberlist.length,a.totalItems=a.distributionMemberlist.length)}),a.setPage=function(b){a.currentPage=b},a.filter=function(){$timeout(function(){a.filteredItems=a.filtered.length},10)},a.sort_by=function(b){a.predicate=b,a.reverse=!a.reverse}}}]);