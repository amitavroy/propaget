var propertyApp=angular.module("propertyApp",["ngRoute","ui.bootstrap"]);propertyApp.filter("startFrom",function(){return function(a,b){return a?(b=+b,a.slice(b)):[]}}),propertyApp.config(["$routeProvider","$locationProvider",function(a){a.when("/list",{title:"View Properties",templateUrl:base_url+"/properties/list",controller:"propertyController"}).when("/add",{title:"Add properties",templateUrl:base_url+"/properties/add",controller:"propertyAddCtrl"}).when("/edit/:id",{title:"Edit property",templateUrl:base_url+"/properties/add",controller:"propertyAddCtrl"}).when("/view/:id",{title:"View property",templateUrl:base_url+"properties/view",controller:"propertyViewCtrl"}).otherwise({redirectTo:"/list"})}]),propertyApp.factory("propertyService",["$http","$rootScope",function(a){return{apiCall:function(b,c,d,e){return a({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:base_url+d,method:c,data:void 0!=e?$.param(e):""}).success(function(){})}}}]),propertyApp.controller("mainCtrl",["$scope","propertyService",function(a){a.$on("MsgEvent",function(b,c){a.infoMsg=c}),a.infoMsg=""}]),propertyApp.controller("propertyController",["$scope","propertyService","$location",function(a,b,c){var d="GET",e="property";b.apiCall("getProperties",d,e).then(function(b){a.properties=b.data,a.currentPage=1,a.entryLimit=5,a.filteredItems=a.properties.length,a.totalItems=a.properties.length}),a.setPage=function(b){a.currentPage=b},a.filter=function(){$timeout(function(){a.filteredItems=a.filtered.length},10)},a.sort_by=function(b){a.predicate=b,a.reverse=!a.reverse},a.deleteProperty=function(d){var e="DELETE",f="property/"+d;b.apiCall("DeleteProperty",e,f).then(function(b){a.$emit("MsgEvent",b.data),c.path("/")})}}]),propertyApp.controller("propertyViewCtrl",["$scope","propertyService","$routeParams",function(a,b,c){if(a.$emit("MsgEvent",""),c.id){var d=c.id,e="GET",f="property/"+d+"/edit";b.apiCall("getSingleProperty",e,f).then(function(b){b.data&&(a.property=b.data)})}}]),propertyApp.controller("propertyAddCtrl",["$scope","propertyService","$routeParams","$location",function(a,b,c,d){if(a.property={},a.submitClicked=!1,a.$emit("MsgEvent",""),c.id){var e=a.property.id=c.id,f="GET",g="property/"+e+"/edit";b.apiCall("getSingleProperty",f,g).then(function(b){b.data&&(a.property=b.data)}),a.save_property=function(){if(a.submitClicked=!0,a.addPropertyForm.$invalid);else{var c="PUT",f="property/"+e;b.apiCall("updateProperty",c,f,a.property).then(function(b){a.$emit("MsgEvent",b.data),d.path("/")})}}}else a.save_property=function(){if(a.submitClicked=!0,a.addPropertyForm.$invalid);else{var c="POST",e="property/";b.apiCall("addProperty",c,e,a.property).then(function(b){a.$emit("MsgEvent",b.data),d.path("/")})}};a.show_error=function(b){if(a.submitClicked){if(a.addPropertyForm[b].$invalid)return"error"}else if(a.addPropertyForm[b].$invalid&&a.addPropertyForm[b].$dirty)return"error";return""}}]);