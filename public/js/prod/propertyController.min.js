var propertyApp=angular.module("propertyApp",["ngRoute"]);propertyApp.config(["$routeProvider","$locationProvider",function(a){a.when("/list",{title:"View Properties",templateUrl:base_url+"/properties/list",controller:"propertyController"}).when("/add",{title:"Add properties",templateUrl:base_url+"/properties/add",controller:"propertyAddCtrl"}).when("/edit/:id",{title:"Edit property",templateUrl:base_url+"/properties/add",controller:"propertyAddCtrl"}).otherwise({redirectTo:"/list"})}]),propertyApp.factory("propertyService",["$http","$rootScope",function(a,b){var c=[];return{getProperties:function(){return a({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:base_url+"property",method:"GET"}).success(function(a){c=a?a.data:{},b.$broadcast("handleProjectsBroadcast",c)})},saveProperty:function(b){return a({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:base_url+"property",method:"POST",data:$.param(b)}).success(function(){})},getProperty:function(b){return a({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:base_url+"property/"+b+"/edit",method:"GET"}).success(function(){})},updateProperty:function(b,c){return a({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:base_url+"property/"+b,method:"PUT",data:$.param(c)}).success(function(){})}}}]),propertyApp.controller("mainCtrl",["$scope","propertyService",function(){}]),propertyApp.controller("propertyController",["$scope","propertyService",function(a,b){b.getProperties().then(function(b){a.properties=b.data,console.log(b)})}]),propertyApp.controller("propertyAddCtrl",["$scope","propertyService","$routeParams","$location",function(a,b,c,d){if(a.property={},a.submitClicked=!1,c.id){var e=a.property.id=c.id;b.getProperty(e).then(function(b){b.data&&(a.property=b.data)}),a.save_property=function(){a.submitClicked=!0,a.addPropertyForm.$invalid?console.log(a.addPropertyForm):b.updateProperty(e,a.property).then(function(){d.path("/")})}}else a.save_property=function(){a.submitClicked=!0,a.addPropertyForm.$invalid?console.log(a.addPropertyForm):(console.log(a.addPropertyForm),b.saveProperty(a.property).then(function(){d.path("/")}))}}]);