var requirementApp=angular.module("requirementApp",["ngRoute","ui.bootstrap"]);requirementApp.filter("startFrom",function(){return function(a,b){return a?(b=+b,a.slice(b)):[]}}),requirementApp.config(["$routeProvider","$locationProvider",function(a){a.when("/list",{title:"View Requirement",templateUrl:base_url+"/requirements/list",controller:"requirementController"}).when("/add",{title:"Add Requirement",templateUrl:base_url+"/requirements/add",controller:"requirementAddCtrl"}).when("/edit/:id",{title:"Edit Requirement",templateUrl:base_url+"/requirements/add",controller:"requirementAddCtrl"}).otherwise({redirectTo:"/list"})}]),requirementApp.factory("requirementService",["$http","$rootScope",function(a,b){var c=[];return{getRequirements:function(){return a({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:base_url+"req-list",method:"GET"}).success(function(a){c=a?a.data:{},b.$broadcast("handleProjectsBroadcast",c)})},saveRequirement:function(b){return a({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:base_url+"req-list",method:"POST",data:$.param(b)}).success(function(){})},getRequirement:function(b){return a({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:base_url+"req-list/"+b+"/edit",method:"GET"}).success(function(){})},updateRequirement:function(b,c){return a({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:base_url+"req-list/"+b,method:"PUT",data:$.param(c)}).success(function(){})},deleteRequirement:function(b){return a({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:base_url+"req-list/"+b,method:"DELETE"}).success(function(){})}}}]),requirementApp.controller("mainCtrl",["$scope","requirementService",function(a){console.log("this info msg"+a.infoMsg)}]),requirementApp.controller("requirementController",["$scope","requirementService","$location",function(a,b,c){b.getRequirements().then(function(b){a.requirements=b.data,a.currentPage=1,a.entryLimit=10,a.filteredItems=a.requirements.length,a.totalItems=a.requirements.length}),a.setPage=function(b){a.currentPage=b},a.filter=function(){$timeout(function(){a.filteredItems=a.filtered.length},10)},a.sort_by=function(b){a.predicate=b,a.reverse=!a.reverse},a.deleteRequirement=function(a){console.log(a),b.deleteRequirement(a).then(function(a){console.log(a),c.path("/")})}}]),requirementApp.controller("requirementAddCtrl",["$scope","requirementService","$routeParams","$location",function(a,b,c,d){if(a.requirement={},a.submitClicked=!1,c.id){var e=a.requirement.id=c.id;b.getRequirement(e).then(function(b){b.data&&(a.requirement=b.data)}),a.save_requirement=function(){a.submitClicked=!0,a.addRequirementForm.$invalid?console.log(a.addRequirementForm):b.updateRequirement(e,a.requirement).then(function(a){console.log("update"+a.data)})}}else console.log("In add"),a.save_requirement=function(){a.submitClicked=!0,console.log("In save add"),a.addRequirementForm.$invalid?console.log("IF"+a.addRequirementForm):(console.log("Else"+a.addRequirementForm),b.saveRequirement(a.requirement).then(function(){d.path("/")}))}}]);